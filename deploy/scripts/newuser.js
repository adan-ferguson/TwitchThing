(()=>{"use strict";const t=document.querySelector("body > #loader");class e extends HTMLFormElement{_inputs;_errorMessage;submitButton;constructor(t){super(),t={async:!1,action:"",submitText:"Submit",success:()=>{},customFetch:!1,fullscreenLoading:!1,extraData:{},html:"",...t},this.options=t,this.classList.add("di-form"),this.innerHTML=`\n<div class="inputs">${t.html}</div>\n<div class="bottom">\n  <button type="submit"></button>\n  <div class="error-message hidden"></div>\n</div>\n`,this._inputs=this.querySelector(".inputs"),this.submitButton=this.querySelector("button"),this.submitButton.textContent=t.submitText,this._errorMessage=this.querySelector(".error-message"),t.action&&this.setAttribute("action",t.action),t.async&&this.addEventListener("submit",(async e=>{e.preventDefault(),this._loading();const n=t.action instanceof Function?await t.action():await async function(t,e=null){let n,s;try{const i={method:"post",headers:{"Content-Type":"application/json"}};return e&&(i.body=JSON.stringify(e)),n=await fetch(t,i),s=await n.text(),s?JSON.parse(s):{}}catch(e){return!n||n.status>=400?s?{error:s}:{error:e||`An error occurred during fizzetch of ${t}`}:{}}}(t.action,this.data());this._loadingFinished(),n.error?this.error(n.error):(t.success(n),this.dispatchEvent(new Event("success")))}))}data(){const t=new FormData(this),e={};Array.from(t.entries()).forEach((([t,n])=>e[t]=n));let n=this.options.extraData;return n="function"==typeof n?n():n,n=n||{},{...e,...n}}addInput(t,e=null){const n=document.createElement("input");for(let e in t)n.setAttribute(e,t[e]);this._addInput(n,e)}_addInput(t,e=null){const n=document.createElement("label");if(e){const t=document.createElement("span");t.textContent=e,n.appendChild(t)}n.appendChild(t),this._inputs.appendChild(n)}addSelect(t){t={label:null,name:"",optionsList:[],...t};const e=document.createElement("label");if(e.classList.add("flex-between"),t.label){const n=document.createElement("span");n.textContent=t.label,e.appendChild(n)}const n=document.createElement("select");return n.setAttribute("name",t.name),t.optionsList.forEach((({value:t,name:e})=>{const s=document.createElement("option");s.value=t,s.textContent=e,n.appendChild(s)})),e.appendChild(n),this._inputs.appendChild(e),n}error(t){this._errorMessage.textContent=t,this._errorMessage.classList.remove("hidden")}_loading(){if(this.options.fullscreenLoading)return function(e=""){t.querySelector(".message").textContent=e,t.classList.add("show")}(this.options.fullscreenLoading.message??"");this._errorMessage.classList.add("hidden"),this.submitButton.disabled=!0,this.submitButton.innerHTML='<span class="spin-effect">DI</span>'}_loadingFinished(){this.options.fullscreenLoading?t.classList.remove("show"):(this.submitButton.disabled=!1,this.submitButton.textContent=this.options.submitText)}}customElements.define("di-form",e,{extends:"form"});const n=new e({submitText:"Save"});n.addInput({type:"text",name:"displayname",minLength:2,maxLength:15,required:"required",placeholder:"Choose a username"}),document.querySelector(".new-user-form").appendChild(n),window.ERROR&&n.error(window.ERROR)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQ3hCVSxXQUFZLFNBRWRrRSxFQUFPckIsU0FBUyxDQUNkc0IsS0FBTSxPQUNOWixLQUFNLGNBQ05hLFVBQVcsRUFDWEMsVUFBVyxHQUNYQyxTQUFVLFdBQ1ZDLFlBQWEsc0JBRWZuRixTQUFTQyxjQUFjLGtCQUFrQmdFLFlBQVlhLEdBRWxETSxPQUFPQyxPQUNSUCxFQUFPbEMsTUFBTXdDLE9BQU9DLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9jbGllbnQvanMvbG9hZGVyLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL2NsaWVudC9qcy9jb21wb25lbnRzL2Zvcm0uanMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vY2xpZW50L2pzL2ZpenpldGNoLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL2NsaWVudC9qcy9lbnRyeVBvaW50cy9uZXd1c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHkgPiAjbG9hZGVyJylcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoaWRlTG9hZGVyKCl7XHJcbiAgbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0xvYWRlcihtZXNzYWdlID0gJycpe1xyXG4gIGxvYWRlci5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZScpLnRleHRDb250ZW50ID0gbWVzc2FnZVxyXG4gIGxvYWRlci5jbGFzc0xpc3QuYWRkKCdzaG93JylcclxufSIsImltcG9ydCBmaXp6ZXRjaCBmcm9tICcuLi9maXp6ZXRjaC5qcydcclxuaW1wb3J0IHsgaGlkZUxvYWRlciwgc2hvd0xvYWRlciB9IGZyb20gJy4uL2xvYWRlci5qcydcclxuXHJcbmNvbnN0IEhUTUwgPSAoaHRtbCkgPT4gYFxyXG48ZGl2IGNsYXNzPVwiaW5wdXRzXCI+JHtodG1sfTwvZGl2PlxyXG48ZGl2IGNsYXNzPVwiYm90dG9tXCI+XHJcbiAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+PC9idXR0b24+XHJcbiAgPGRpdiBjbGFzcz1cImVycm9yLW1lc3NhZ2UgaGlkZGVuXCI+PC9kaXY+XHJcbjwvZGl2PlxyXG5gXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBESUZvcm0gZXh0ZW5kcyBIVE1MRm9ybUVsZW1lbnR7XHJcblxyXG4gIF9pbnB1dHNcclxuICBfZXJyb3JNZXNzYWdlXHJcbiAgc3VibWl0QnV0dG9uXHJcblxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xyXG4gICAgc3VwZXIoKVxyXG5cclxuICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgYWN0aW9uOiAnJyxcclxuICAgICAgc3VibWl0VGV4dDogJ1N1Ym1pdCcsXHJcbiAgICAgIHN1Y2Nlc3M6ICgpID0+IHt9LFxyXG4gICAgICBjdXN0b21GZXRjaDogZmFsc2UsXHJcbiAgICAgIGZ1bGxzY3JlZW5Mb2FkaW5nOiBmYWxzZSxcclxuICAgICAgZXh0cmFEYXRhOiB7fSxcclxuICAgICAgaHRtbDogJycsXHJcbiAgICAgIC4uLm9wdGlvbnNcclxuICAgIH1cclxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcclxuXHJcbiAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2RpLWZvcm0nKVxyXG4gICAgdGhpcy5pbm5lckhUTUwgPSBIVE1MKG9wdGlvbnMuaHRtbClcclxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMucXVlcnlTZWxlY3RvcignLmlucHV0cycpXHJcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMucXVlcnlTZWxlY3RvcignYnV0dG9uJylcclxuICAgIHRoaXMuc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gb3B0aW9ucy5zdWJtaXRUZXh0XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci1tZXNzYWdlJylcclxuXHJcbiAgICBpZihvcHRpb25zLmFjdGlvbil7XHJcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhY3Rpb24nLCBvcHRpb25zLmFjdGlvbilcclxuICAgIH1cclxuXHJcbiAgICBpZihvcHRpb25zLmFzeW5jKXtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyBlID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICB0aGlzLl9sb2FkaW5nKClcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb25zLmFjdGlvbiBpbnN0YW5jZW9mIEZ1bmN0aW9uID8gYXdhaXQgb3B0aW9ucy5hY3Rpb24oKSA6IGF3YWl0IGZpenpldGNoKG9wdGlvbnMuYWN0aW9uLCB0aGlzLmRhdGEoKSlcclxuICAgICAgICB0aGlzLl9sb2FkaW5nRmluaXNoZWQoKVxyXG4gICAgICAgIGlmKHJlc3VsdC5lcnJvcil7XHJcbiAgICAgICAgICB0aGlzLmVycm9yKHJlc3VsdC5lcnJvcilcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIG9wdGlvbnMuc3VjY2VzcyhyZXN1bHQpXHJcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdzdWNjZXNzJykpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGF0YSgpe1xyXG4gICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YSh0aGlzKVxyXG4gICAgY29uc3Qgb2JqID0ge31cclxuICAgIEFycmF5LmZyb20oZGF0YS5lbnRyaWVzKCkpLmZvckVhY2goKFtrZXksIHZhbF0pID0+IG9ialtrZXldID0gdmFsKVxyXG5cclxuICAgIGxldCBleHRyYSA9IHRoaXMub3B0aW9ucy5leHRyYURhdGFcclxuICAgIGV4dHJhID0gdHlwZW9mIGV4dHJhID09PSAnZnVuY3Rpb24nID8gZXh0cmEoKSA6IGV4dHJhXHJcbiAgICBleHRyYSA9IGV4dHJhID8gZXh0cmEgOiB7fVxyXG5cclxuICAgIHJldHVybiB7IC4uLm9iaiwgLi4uZXh0cmEgfVxyXG4gIH1cclxuXHJcbiAgYWRkSW5wdXQob3B0aW9ucywgbGFiZWwgPSBudWxsKXtcclxuXHJcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcclxuICAgIGZvciAobGV0IGtleSBpbiBvcHRpb25zKXtcclxuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKGtleSwgb3B0aW9uc1trZXldKVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2FkZElucHV0KGlucHV0LCBsYWJlbClcclxuICB9XHJcblxyXG4gIF9hZGRJbnB1dChpbnB1dEVsLCBsYWJlbCA9IG51bGwpe1xyXG5cclxuICAgIGNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpXHJcbiAgICBpZihsYWJlbCl7XHJcbiAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcclxuICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGxhYmVsXHJcbiAgICAgIGxhYmVsRWwuYXBwZW5kQ2hpbGQoc3BhbilcclxuICAgIH1cclxuXHJcbiAgICBsYWJlbEVsLmFwcGVuZENoaWxkKGlucHV0RWwpXHJcbiAgICB0aGlzLl9pbnB1dHMuYXBwZW5kQ2hpbGQobGFiZWxFbClcclxuICB9XHJcblxyXG4gIGFkZFNlbGVjdChvcHRpb25zKXtcclxuXHJcbiAgICBvcHRpb25zID0ge1xyXG4gICAgICBsYWJlbDogbnVsbCxcclxuICAgICAgbmFtZTogJycsXHJcbiAgICAgIG9wdGlvbnNMaXN0OiBbXSxcclxuICAgICAgLi4ub3B0aW9uc1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKVxyXG4gICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgnZmxleC1iZXR3ZWVuJylcclxuICAgIGlmKG9wdGlvbnMubGFiZWwpe1xyXG4gICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXHJcbiAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBvcHRpb25zLmxhYmVsXHJcbiAgICAgIGxhYmVsLmFwcGVuZENoaWxkKHNwYW4pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0JylcclxuICAgIHNlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBvcHRpb25zLm5hbWUpXHJcbiAgICBvcHRpb25zLm9wdGlvbnNMaXN0LmZvckVhY2goKHsgdmFsdWUsIG5hbWUgfSkgPT4ge1xyXG4gICAgICBjb25zdCBvcHRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJylcclxuICAgICAgb3B0aW9ucy52YWx1ZSA9IHZhbHVlXHJcbiAgICAgIG9wdGlvbnMudGV4dENvbnRlbnQgPSBuYW1lXHJcbiAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHRpb25zKVxyXG4gICAgfSlcclxuICAgIGxhYmVsLmFwcGVuZENoaWxkKHNlbGVjdClcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuYXBwZW5kQ2hpbGQobGFiZWwpXHJcbiAgICByZXR1cm4gc2VsZWN0XHJcbiAgfVxyXG5cclxuICBlcnJvcihtZXNzYWdlKXtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IG1lc3NhZ2VcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gIH1cclxuXHJcbiAgX2xvYWRpbmcoKXtcclxuICAgIGlmKHRoaXMub3B0aW9ucy5mdWxsc2NyZWVuTG9hZGluZyl7XHJcbiAgICAgIHJldHVybiBzaG93TG9hZGVyKHRoaXMub3B0aW9ucy5mdWxsc2NyZWVuTG9hZGluZy5tZXNzYWdlID8/ICcnKVxyXG4gICAgfVxyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcclxuICAgIHRoaXMuc3VibWl0QnV0dG9uLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInNwaW4tZWZmZWN0XCI+REk8L3NwYW4+J1xyXG4gIH1cclxuXHJcbiAgX2xvYWRpbmdGaW5pc2hlZCgpe1xyXG4gICAgaWYodGhpcy5vcHRpb25zLmZ1bGxzY3JlZW5Mb2FkaW5nKXtcclxuICAgICAgcmV0dXJuIGhpZGVMb2FkZXIoKVxyXG4gICAgfVxyXG4gICAgdGhpcy5zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZVxyXG4gICAgdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLm9wdGlvbnMuc3VibWl0VGV4dFxyXG4gIH1cclxufVxyXG5cclxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdkaS1mb3JtJywgRElGb3JtLCB7IGV4dGVuZHM6ICdmb3JtJyB9KSIsImV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uKHVybCwgZGF0YSA9IG51bGwpe1xyXG4gIGxldCByZXNwXHJcbiAgbGV0IHRleHRcclxuICB0cnkge1xyXG4gICAgY29uc3Qgb2JqID0ge1xyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGRhdGEpe1xyXG4gICAgICBvYmouYm9keSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICB9XHJcblxyXG4gICAgcmVzcCA9IGF3YWl0IGZldGNoKHVybCwgb2JqKVxyXG4gICAgdGV4dCA9IGF3YWl0IHJlc3AudGV4dCgpXHJcbiAgICByZXR1cm4gdGV4dCA/IEpTT04ucGFyc2UodGV4dCkgOiB7fVxyXG4gIH1jYXRjaChleCl7XHJcbiAgICBpZighcmVzcCB8fCByZXNwLnN0YXR1cyA+PSA0MDApe1xyXG4gICAgICBpZih0ZXh0KXtcclxuICAgICAgICByZXR1cm4geyBlcnJvcjogdGV4dCB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHsgZXJyb3I6IGV4IHx8IGBBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgZml6emV0Y2ggb2YgJHt1cmx9YCB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge31cclxuICB9XHJcbn0iLCJpbXBvcnQgRElGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvZm9ybS5qcydcclxuXHJcbmNvbnN0IGRpZm9ybSA9IG5ldyBESUZvcm0oe1xyXG4gIHN1Ym1pdFRleHQ6ICdTYXZlJ1xyXG59KVxyXG5kaWZvcm0uYWRkSW5wdXQoe1xyXG4gIHR5cGU6ICd0ZXh0JyxcclxuICBuYW1lOiAnZGlzcGxheW5hbWUnLFxyXG4gIG1pbkxlbmd0aDogMixcclxuICBtYXhMZW5ndGg6IDE1LFxyXG4gIHJlcXVpcmVkOiAncmVxdWlyZWQnLFxyXG4gIHBsYWNlaG9sZGVyOiAnQ2hvb3NlIGEgdXNlcm5hbWUnXHJcbn0pXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXctdXNlci1mb3JtJykuYXBwZW5kQ2hpbGQoZGlmb3JtKVxyXG5cclxuaWYod2luZG93LkVSUk9SKXtcclxuICBkaWZvcm0uZXJyb3Iod2luZG93LkVSUk9SKVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsibG9hZGVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiRElGb3JtIiwiSFRNTEZvcm1FbGVtZW50IiwiX2lucHV0cyIsIl9lcnJvck1lc3NhZ2UiLCJzdWJtaXRCdXR0b24iLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJzdXBlciIsImFzeW5jIiwiYWN0aW9uIiwic3VibWl0VGV4dCIsInN1Y2Nlc3MiLCJjdXN0b21GZXRjaCIsImZ1bGxzY3JlZW5Mb2FkaW5nIiwiZXh0cmFEYXRhIiwiaHRtbCIsInRoaXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbm5lckhUTUwiLCJ0ZXh0Q29udGVudCIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJfbG9hZGluZyIsInJlc3VsdCIsIkZ1bmN0aW9uIiwidXJsIiwiZGF0YSIsInJlc3AiLCJ0ZXh0Iiwib2JqIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZmV0Y2giLCJwYXJzZSIsImV4Iiwic3RhdHVzIiwiZXJyb3IiLCJmaXp6ZXRjaCIsIl9sb2FkaW5nRmluaXNoZWQiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJGb3JtRGF0YSIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsIiwiZXh0cmEiLCJhZGRJbnB1dCIsImxhYmVsIiwiaW5wdXQiLCJjcmVhdGVFbGVtZW50IiwiX2FkZElucHV0IiwiaW5wdXRFbCIsImxhYmVsRWwiLCJzcGFuIiwiYXBwZW5kQ2hpbGQiLCJhZGRTZWxlY3QiLCJuYW1lIiwib3B0aW9uc0xpc3QiLCJzZWxlY3QiLCJ2YWx1ZSIsIm1lc3NhZ2UiLCJyZW1vdmUiLCJzaG93TG9hZGVyIiwiZGlzYWJsZWQiLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSIsImV4dGVuZHMiLCJkaWZvcm0iLCJ0eXBlIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwicmVxdWlyZWQiLCJwbGFjZWhvbGRlciIsIndpbmRvdyIsIkVSUk9SIl0sInNvdXJjZVJvb3QiOiIifQ==